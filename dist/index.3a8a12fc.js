"use strict";const apiKey="AIzaSyDZX8IQyuF5VpGmZ6TG7_przQBbM48w6ts",apiKeyWeather="f4928461d9d6b08fe31a2fc25d5a91bd",photoEl=document.querySelector(".photo"),infoDailyEl=document.querySelector(".info-daily"),infoCurrentEl=document.querySelector(".info-current"),iconSearchEl=document.querySelector(".icon-search"),inputSearchEl=document.querySelector(".input-search"),cors=document.querySelector(".cors"),city1=document.querySelector(".city"),date=document.querySelector(".date"),time=document.querySelector(".time"),btnUnits=document.querySelector(".units-button"),icocMain=document.querySelector(".main-img"),infoAboutMe=document.querySelector(".main-info"),invis=document.querySelector(".invis"),kokot0=document.querySelector(".kokot0"),kokot1=document.querySelector(".kokot1"),kokot2=document.querySelector(".kokot2"),hidden=document.querySelector(".hidden"),error=document.querySelector(".error");let interval;function enterKey(e){"Enter"===e.key&&(e.preventDefault(),showCity(inputSearchEl.value),clearInterval(interval),inputSearchEl.value="")}function setClock(e){function t(){const t=new Date,n=t.getMinutes(),i=t.getHours()+(e.timezone_offset/60/60-1),o=Number(i.toFixed(0)),r=o<1?24+o:o,s=r>=13?r%12:r;let c=`<div class="time-photo">${s<10?"0"+s:s}:${n<10?"0"+n:n} ${(r>=24?r-24:r)>=12?"PM":"AM"}</div>`;time.innerHTML=c}interval=setInterval(t,1e3),t()}icocMain.addEventListener("click",(function(){infoAboutMe.classList.toggle("hidden")})),iconSearchEl.addEventListener("click",(function(){showCity(inputSearchEl.value),clearInterval(interval)})),inputSearchEl.addEventListener("keydown",enterKey),navigator.geolocation.getCurrentPosition((function(e){!async function(e,t){const n=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${apiKey}`),i=(await n.json()).results[0].address_components[3].short_name;showCity(i)}(e.coords.latitude,e.coords.longitude)}),(function(){console.log("Could not get your position!")}));let units="metric",curId="",unit="&#176;C",unitSpeed="km/h";const change=function(){"metric"===units?(units="imperial",unit="&#176;F",unitSpeed="mil/h",showId(curId),clearInterval(interval),console.log(units)):(units="metric",unit="&#176;C",unitSpeed="km/h",showId(curId),clearInterval(interval))};btnUnits.addEventListener("click",change);const showCity=async function(e){try{const t=await fetch(`https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=${e}&inputtype=textquery&key=${apiKey}`),n=await t.json();"OK"!==n.status&&(error.style.display="block",setTimeout((()=>{error.style.display="none"}),4e3));const i=n.candidates[0].place_id;curId=i,showId(i)}catch(e){console.error(e)}},showId=async function(e){try{const t=await fetch(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${e}&inputtype=textquery&key=${apiKey}`),n=await t.json();curPlaceIntoDOM(n.result);const i=n.result.geometry.location.lat,o=n.result.geometry.location.lng;let r=n.result.photos.find((function(e,t){if(e.width/e.height>=1.41)return n.result.photos[t]}));r=r.photo_reference;(async function(e,t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=hourly,minutely&units=${units}&appid=${apiKeyWeather}`),i=await n.json();setClock(i),timeIntoDOM(i),weekIntoDOM(i.daily),dayIntoDOM(i)}catch(e){console.error(e)}})(i,o);(async function(e){try{const t=await fetch(`https://maps.googleapis.com/maps/api/place/photo?maxwidth=1600&photo_reference=${e}&key=${apiKey}`),n=await t.url;photoEl.innerHTML=`<img src="${n}"/>`}catch(e){console.error(e)}})(r)}catch(e){console.error(e)}};let corsItem="",cityItem="";const curPlaceIntoDOM=function(e){corsItem=`<div class="cors-photo">${e.geometry.location.lat.toFixed(4)}N ${e.geometry.location.lng.toFixed(4)}E</div>`,cityItem=`<div class="city-photo">${e.formatted_address}</div>`,cors.innerHTML=corsItem,city1.innerHTML=cityItem},timeIntoDOM=function(e){let t=`<div class="date-photo">${moment(1e3*e.current.dt+1e3*e.timezone_offset-3600).format("MMMM Do YYYY")}</div>`;date.innerHTML=t},weekIntoDOM=function(e){let t="";e.forEach((function(e,n){7!==n&&(t+=0===n?`<div class="weather-item">\n      <div class="day"><span>Today</span></div>\n      <img\n        src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png"\n        alt="icon of weather"\n        class="icon-weather"\n      />\n      <div class="temp">${e.temp.day.toFixed(1)}${unit}</div>\n      <div class="temp">${e.temp.night.toFixed(1)}${unit}</div>\n    </div>`:`<div class="weather-item">\n      <div class="day">${window.moment(1e3*e.dt).format("ddd")}</div>\n      <img\n        src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png"\n        alt="icon of weather"\n        class="icon-weather"\n      />\n      <div class="temp">${e.temp.day.toFixed(1)}${unit}</div>\n      <div class="temp">${e.temp.night.toFixed(1)}${unit}</div>\n    </div>`)})),infoDailyEl.innerHTML=t},dayIntoDOM=function(e){let t=`\n  <div class="current-item current--1">\n               <p class="current-temp">${e.current.temp.toFixed(1)}${unit}</p>\n                <p class="current-feels_like"><span>feels like:</span> ${e.current.feels_like.toFixed(1)}${unit}</p>\n              </div>\n           <div class="current-item current--2">\n            <p class="current-description">${e.current.weather[0].description}</p>\n            <img\n              src="http://openweathermap.org/img/wn/${e.current.weather[0].icon}@2x.png"\n              alt="icon of weather"\n              class="icon-weather--current"\n            />\n          </div>\n\n          <div class="swiper mySwiper">\n            <div class="swiper-wrapper">\n              <div class="swiper-slide"><ul>\n              <li class="current-feels_like">\n                <span>highest temperature:</span>\n                ${e.daily[0].temp.max.toFixed(1)}${unit}\n              </li>\n              <li class="current-feels_like">\n                <span>lowest temperature:</span>\n                ${e.daily[0].temp.min.toFixed(1)}${unit}\n              </li>\n              <li class="current-feels_like"><span>humidity:</span> ${e.current.humidity}%</li>\n              </ul></div>\n              <div class="swiper-slide"><ul>\n              <li class="current-feels_like"><span>sunrise:</span> ${moment(1e3*e.current.sunrise+1e3*e.timezone_offset-36e5).format("HH:mm a")}</li>\n              <li class="current-feels_like"><span>sunset:</span> ${moment(1e3*e.current.sunset+1e3*e.timezone_offset-36e5).format("HH:mm a")}</li>\n              <li class="current-feels_like"><span>wind speed:</span> ${e.current.wind_speed.toFixed(1)} ${unitSpeed}</li>\n              </ul></div>\n              <div class="swiper-slide">\n              <ul>\n              <li class="current-feels_like"><span>timezone:</span> ${e.timezone}</li>\n               <li class="current-feels_like"><span>timezone offset:</span> UTC ${e.timezone_offset/60/60>0?"+"+e.timezone_offset/60/60:e.timezone_offset/60/60}</li>\n                 <li class="current-feels_like">\n                 <span>pressure:</span> ${e.current.pressure} hPa\n               </li>\n               </ul></div>\n            </div>\n            <div class="swiper-button-next "></div>\n            <div class="swiper-button-prev"></div>\n            <div class="swiper-pagination"></div>\n          </div>`;infoCurrentEl.innerHTML=t;new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:30,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})};
//# sourceMappingURL=index.3a8a12fc.js.map
